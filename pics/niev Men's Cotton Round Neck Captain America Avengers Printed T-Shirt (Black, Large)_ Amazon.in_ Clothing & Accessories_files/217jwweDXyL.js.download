(function(m){var r=window.AmazonUIPageJS||window.P,t=r._namespace||r.attributeErrors,d=t?t("DetailPageTwisterViewAsset",""):r;d.guardFatal?d.guardFatal(m)(d,window):d.execute(function(){m(d,window)})})(function(m,r,t){m.when("A","dp-refresh-handler","view-util","twister-string-constants").register("page-refresh-view",function(d,E,n,h){var p=d.$;return function(v,q,t){function z(c){return{chunk:function(b){var c=b.ASIN,k=b.Value;b=b.FeatureName;if(!e.hiddenFeatures[b]){var f=b,a,l;try{f&&k&&k.content&&
(l=k.content[f],"undefined"!==typeof l&&(a=p("#"+f),a.html(l),a.css({opacity:""})))}catch(d){f=f||"NoFeatureName",w.logFatal(d,{message:"Error in feature"+f})}e.twisterRefreshHandler.stampFeature(f,c);"twister-slot-price_feature_div"==b&&((c=k?k.content:null)&&""!==c.priceToSet&&p(".swatchSelect .twisterSwatchPrice").text(c.priceToSet),c&&c.hasPricePerUnit&&""!==c.pricePerUnitDisplay&&p(".swatchSelect .price_slot_ppu").text(c.pricePerUnitDisplay))}},success:function(b,c,e){A("twisterUpdateSuccess")},
error:function(c,g,e){Twister.$("#variations-overlay").hide();A("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(c){w.logFatal("Ajax aborted: "+c)},timeout:4E4}}function B(c,b,g,e,f){var a=[];"parent"===c?(b=x(b,e,"parent",f),a.parent=b,b=x(g,e,"partial",f),a.partial=b):(b=x(g,e,c,f),a[c]=b);return a}function y(c,b,g,k,f){for(var a in c)if(c.hasOwnProperty(a)){if("full"===a){var l=g.dimensionType,d=e.twisterUtil.getDimensionInfo().length;
e.twisterRefreshHandler.startMeasurement(g.newAsin,l,d,g.dimensionDisplayType)}l=c[a].twisterRefreshParams;d=c[a].notifyClientParams;f&&(p(e.config[a].affectedFeatures).css({opacity:.5}),e.twisterRefreshHandler.doPageRefresh(null,l,b,k));F(d.asin,d.id,a,f)}}function G(){p.each(q.contextMetaData,function(c,b){var g={};b=b.elementList||[];var d=b.length,f=[];g.click={};g.mouseOver={};for(var a=0;a<d;a++){var l=p("#"+b[a].divToUpdate);f.push("#"+b[a].divToUpdate);l.length&&b[a].customClientFunction&&
(b[a].updateOnHover&&(g.mouseOver[b[a].divToUpdate]=l.attr("customfunctionname")),g.click[b[a].divToUpdate]=l.attr("customfunctionname"))}e.config[c].affectedFeatures=f.join(",");e.config[c].clientFeatures=g})}function F(c,b,g,d){var f="",f=d?h.EVENT_TYPE_CLICK:h.EVENT_TYPE_MOUSEOVER;p.each(e.config[g].clientFeatures[f],function(a,f){try{var g=function(){e.twisterRefreshHandler.stampImageLoad(c)};(function(){var a={};a.P=m;(function(){eval("var P \x3d this.P;");eval("0, "+f)(b,DetailPage.StateController,
g)}).call(a)})()}catch(d){w.logFatal("Client feature - "+a+", threw and exception :- "+d)}})}function x(c,b,g,k){var f={},a={};f.asinList=c;f.id="parent"===g?c:"partial"===k?b:c;f.mType=g;f=H(g,f);g=!1;(k=d.state("pwState"))&&(g=k.isTryState);g&&(f.isTryState=g);f=e.twisterRefreshHandler.createCustomParamsMap({},f);a.asin=c;a.id=b;return{twisterRefreshParams:f,notifyClientParams:a}}function H(c,b){p.each(q.contextMetaData[c].mTypeSpecificURLParams,function(c,e){b[c]=e});return b}function I(c){c=e.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(c.selected_variation_values);
e.twisterUtil.isFullySelected(c)?e.currentPageSelectionState="full":e.currentPageSelectionState="partial"}function J(c){var b={};c=c.twisterUpdateURLInfo.immutableURLPrefix;c+="\x26isFlushing\x3d2\x26dpEnvironment\x3d"+Twister.dpEnvironment;b.pageRefreshUrl=c;return b}function K(c){var b={};b.config=c.measurement;b.dimensionDisplayType=c.dimensionsDisplayType;b.storeID=c.storeID;b.productGroupID=c.productGroupID;return b}function C(c,b){var e;"partial"===c&&"partial"===b&&(e="partial");"partial"===
c&&"full"===b&&(e="full");"full"===c&&"partial"===b&&(e="parent");"full"===c&&"full"===b&&(e="full");return e}var e=this,L=q.parent_asin,u=r.ue,D="",w=new t("dpTwisterPageRefreshView");this.twisterUtil=v.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};e.viewUtil=new n(v);e.subType;var A=function(c){u&&u.count&&u.count(c,(u.count(c)||0)+1)};(function(){I(q);
G();var c={featureName:e.twisterFeatureName},b=J(q),d=K(q);e.twisterRefreshHandler=new E(c,b,d);v.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(c,b){var a={};if(c!==h.METADATA){var a={},d;d=void 0;if(b)switch(c){case h.VARIATION_CHANGE:d=b.selected().selInfo;break;case h.VARIATION_PEEK:d=b.peek().selInfo}a.selectionInfo=d;a.dimensionCombination=e.viewUtil.getCurrDimCombId(a.selectionInfo,"_","X");d=e.twisterUtil.isFullySelected(a.dimensionCombination);
a.childAsin=e.twisterUtil.getAsinFromSelectionInfo(a.selectionInfo,d);a.newPageSelectionState=d?"full":"partial";a.mTypeForRefresh=C(e.currentPageSelectionState,a.newPageSelectionState);a.newAsin="parent"===a.mTypeForRefresh?L:a.childAsin;a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1;a.twisterCallListParams=B(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState);a.optionsForTwisterRefresh=z(b);a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:D,dimensionDisplayType:q.dimensionsDisplayType}}switch(c){case h.VARIATION_CHANGE:e.subType!==
h.PRODUCTIZED_VIEW_SUBTYPE&&(y(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),e.currentPageSelectionState=a.newPageSelectionState,e.subType=void 0);break;case h.VARIATION_PEEK:y(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!1);break;case h.METADATA:switch(b.subType){case h.DP_STATE_VIEW_SUBTYPE:D=b.divMetadata.dimDisplayType;break;case h.PRODUCTIZED_VIEW_SUBTYPE:e.subType=b.subType,a.dimensionCombination=b.newDimCombID,
a.childAsin=b.childAsin,a.newAsin=b.newAsin,a.newPageSelectionState=e.twisterUtil.isFullySelected(a.dimensionCombination)?"full":"partial",a.mTypeForRefresh=C(e.currentPageSelectionState,a.newPageSelectionState),a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1,a.twisterCallListParams=B(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState),a.optionsForTwisterRefresh=z(b),a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:b.divMetaData?b.divMetaData.dimDisplayType:
void 0,dimensionDisplayType:q.dimensionsDisplayType},y(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),e.currentPageSelectionState=a.newPageSelectionState}}}})})()}});"use strict";m.when("A","twister-util","ready").execute(function(d,m){var n=r.ue;if(void 0!==d.state("dimensionKeyList"))for(var h in d.state("dimensionKeyList").dimensionKeys)void 0!==h&&(d.on("a:popover:beforeShow:mobile-twister_"+h,function(p){void 0===d.state("twisterInteractability")&&n&&
"function"===typeof n.count&&n.count("Twister:blankTwisterSecView",(n.count("Twister:blankTwisterSecView")||0)+1)}),d.on("a:popover:beforeHide:mobile-twister_"+h,function(d){if(d&&d.popover){d=d.popover.getContent();var h=0<d.find(".aw-twister-row:first").length;d&&!h&&n&&"function"===typeof n.count&&n.count("blankTwisterSecondaryView",(n.count("blankTwisterSecondaryView")||0)+1)}}))});"use strict";m.when("A").register("twister-bottom-sheet-container",function(d){return{getInstance:function(){return this.sheetViewInstance},
saveInstance:function(m){this.sheetViewInstance=m;d.trigger("dp:sheet:twister:initialized")}}})});